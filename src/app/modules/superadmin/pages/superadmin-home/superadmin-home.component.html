<h2>Panel SuperAdmin</h2>

<!-- FORMULARIO CREACIÓN -->
<h3>Crear nuevo usuario</h3>

<div class="form-crear">
  <input type="text" placeholder="Nombre" [(ngModel)]="nuevoNombre">
  <input type="email" placeholder="Email" [(ngModel)]="nuevoEmail">
  <input type="password" placeholder="Contraseña" [(ngModel)]="nuevoPassword">

  <select [(ngModel)]="nuevoRol">
    <option *ngFor="let r of roles" [value]="r">
      {{ r }}
    </option>
  </select>

  <button (click)="crearUsuario()">Crear Usuario</button>
</div>

<hr>

<!-- TABLA DE USUARIOS -->
<div *ngIf="cargando">Cargando usuarios...</div>

<table *ngIf="!cargando">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Email</th>
      <th>Rol</th>
      <th>Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let u of usuarios">
      <td>{{ u.nombre }}</td>
      <td>{{ u.email }}</td>

      <!-- CAMBIO DE ROL -->
      <td>
        <select
          [ngModel]="u.rol"
          (ngModelChange)="cambiarRol(u.uid, $event)"
        >
          <option *ngFor="let r of roles" [value]="r">
            {{ r }}
          </option>
        </select>
      </td>

      <!-- ACCIÓN: ELIMINAR -->
      <td>
        <button 
          *ngIf="u.uid !== miUID"
          (click)="eliminar(u.uid)">
          Eliminar
        </button>
      </td>
    </tr>
  </tbody>
</table>
